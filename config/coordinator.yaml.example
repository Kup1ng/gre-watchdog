role: "ir"

listen_host: "0.0.0.0"
listen_port: 8000   # پنل وب

shared_secret: "CHANGE_ME"

iface_regex: "^gre-ir-(\\d+)$"

agent_base_url: "http://OUTSIDE_SERVER_IP:7801"

# مانیتور
check_interval_sec: 15
confirm_bad_rounds: 3

ping_count: 7
ping_timeout_sec: 2
loss_ok_percent: 20

# reset sequence
down_hold_sec: 300
up_gap_sec: 45

# Retry های RPC به agent (خیلی مهم)
rpc_max_attempts: 6
rpc_base_backoff_ms: 250
rpc_max_backoff_ms: 4000
rpc_timeout_sec: 6

# جلوگیری از loop
max_resets_per_30min: 3
pause_after_limit_min: 30

# پنل
panel_username: "admin"
panel_password: "CHANGE_ME_STRONG"   # یا بعداً بذارش پشت nginx basic auth
panel_session_ttl_min: 120

# state persistence
state_path: "/var/lib/gre-watchdog/state.json"
log_dir: "/var/log/gre-watchdog"

cli_token: "CHANGE_ME_LONG_RANDOM"
